# 文档翻译微服务部署架构

## 🏗️ 整体架构

```
┌─────────────────────────────────────────────────────────────┐
│                      负载均衡层 (Nginx)                        │
├─────────────────────────────────────────────────────────────┤
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐│
│  │   Web Frontend  │  │   API Gateway   │  │   Static Files  ││
│  │    (Vue/React)  │  │  (Orchestrator) │  │   (Assets)      ││
│  │    Port: 3000   │  │   Port: 8000    │  │                 ││
│  └─────────────────┘  └─────────────────┘  └─────────────────┘│
├─────────────────────────────────────────────────────────────┤
│                      业务逻辑层                                │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐│
│  │ Orchestrator    │  │  File Service   │  │  Cache Service  ││
│  │ (编排服务)       │  │  (文件处理)      │  │   (Redis)       ││
│  │ Port: 8000      │  │  Port: 8010     │  │   Port: 6379    ││
│  └─────────────────┘  └─────────────────┘  └─────────────────┘│
├─────────────────────────────────────────────────────────────┤
│                     AI模型服务层 (需GPU)                       │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐│
│  │   OCR Service   │  │  NMT Service    │  │  Vision Service ││
│  │  (文字识别)      │  │   (机器翻译)     │  │  (图像处理)      ││
│  │  Port: 7010     │  │  Port: 7020     │  │  Port: 7030     ││
│  │  需要: GPU      │  │  需要: GPU      │  │  需要: GPU      ││
│  └─────────────────┘  └─────────────────┘  └─────────────────┘│
├─────────────────────────────────────────────────────────────┤
│                      存储层                                   │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐│
│  │   PostgreSQL    │  │   File Storage  │  │   Log Storage   ││
│  │   (元数据)       │  │   (MinIO/S3)    │  │  (ELK Stack)    ││
│  │   Port: 5432    │  │   Port: 9000    │  │                 ││
│  └─────────────────┘  └─────────────────┘  └─────────────────┘│
└─────────────────────────────────────────────────────────────┘
```

## 🚀 部署策略

### 开发机器 (当前)
- **Orchestrator Service** (编排服务)
- **File Service** (文件处理服务)
- **Web Frontend** (前端界面)
- **Nginx** (反向代理)
- **PostgreSQL** (数据库)
- **Redis** (缓存)

### GPU机器 (模型服务)
- **OCR Service** (EasyOCR + PaddleOCR)
- **NMT Service** (Ollama + CTranslate2)
- **Vision Service** (图像处理 + Inpainting)

## 🔧 技术栈选择

### OCR服务 (GPU机器)
- **EasyOCR**: 多语言文字识别
- **PaddleOCR**: 高精度中文识别
- **TrOCR**: Transformer-based OCR
- **资源需求**: 4-8GB GPU内存

### 翻译服务 (GPU机器)  
- **Ollama**: 本地LLM推理
- **CTranslate2**: 优化的翻译模型
- **NLLB**: Meta多语言翻译
- **资源需求**: 8-16GB GPU内存

### 图像处理服务 (GPU机器)
- **Stable Diffusion Inpainting**: 图像修复
- **CLIP**: 图像理解
- **YOLO**: 目标检测
- **资源需求**: 8-12GB GPU内存